{"version":3,"sources":["markdown.js"],"names":[],"mappings":";sHAMa,qBAAqB;;AA8BlC,WAAS,MAAM,CAAC,GAAG,EAAC;AAClB,QAAI,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;AACzC,QAAI,CAAC,KAAK;AAAE,aAAO,GAAG,CAAC;KAAA,AAEvB,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE;AACxD,aAAO,EAAE,CAAC,MAAM,CAAC;KAClB,CAAC,CAAC,CAAC;;AAEJ,QAAI,EAAE,GAAG,IAAI,MAAM,CAAC,UAAU,GAAG,MAAM,GAAG,GAAG,EAAE,IAAI,CAAC,CAAC;AACrD,WAAO,MAAM,GAAG,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,GAAG,CAAC;GAC/C;;;mCA9CO,QAAQ;iCAAC,MAAM;kCAAC,OAAO;uCAAC,YAAY;gDAAC,qBAAqB;;;;;;;;;;;;;AAMrD,2BAAqB;AAGrB,iBAHA,qBAAqB,CAGpB,OAAO,EAAC;;;AAClB,cAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AACvB,cAAI,CAAC,SAAS,GAAG,IAAI,QAAQ,CAAC,SAAS,EAAE,CAAC;SAC3C;;qBANU,qBAAqB;;iBAQxB,oBAAE;AACR,gBAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,IAAI,IAAI,CAAC,OAAO,CAAC;AACpD,gBAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;WAC3C;;;iBAEW,sBAAC,QAAQ,EAAC;AACpB,gBAAI,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;AAChE,gBAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC;;;;;;AACnD,mCAAgB,KAAK,8HAAE;oBAAf,IAAI;;AACV,oBAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;AACvB,oBAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AACzB,oBAAI,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,GAAC,CAAC,CAAC,CAAC;;AAElC,oBAAI,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC;AAC1B,mBAAG,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AACxB,mBAAG,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,GAAC,CAAC,CAAC,CAAC;;AAEjC,qBAAK,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;eAC9B;;;;;;;;;;;;;;;WACF;;;;iBAzBe,CAAC,OAAO,CAAC;;;qCAFd,qBAAqB;AAArB,6BAAqB,GAFjC,qBAAqB,CAET,qBAAqB,KAArB,qBAAqB;AAArB,6BAAqB,GADjC,MAAM,CACM,qBAAqB,KAArB,qBAAqB;eAArB,qBAAqB;;;uCAArB,qBAAqB","file":"markdown.js","sourceRoot":"/source/","sourcesContent":["import {bindable,noView,useView,useShadowDOM,skipContentProcessing} from 'aurelia-framework';\nimport showdown from 'showdown';\nimport prism from 'prism';\n\n@skipContentProcessing\n@noView\nexport class MarkdownCustomElement {\n\n  static inject = [Element];\n  constructor(element){\n    this.element = element;\n    this.converter = new showdown.converter();\n  }\n\n  attached(){\n    this.root = this.element.shadowRoot || this.element;\n    this.valueChanged(this.element.innerHTML);\n  }\n\n  valueChanged(newValue){\n    this.root.innerHTML = this.converter.makeHtml(dedent(newValue));\n    var codes = this.root.querySelectorAll('pre code');\n    for(var node of codes) {\n      var c = node.className;\n      node.classList.remove(c);\n      node.classList.add(\"language-\"+c);\n\n      var pre = node.parentNode;\n      pre.classList.remove(c);\n      pre.classList.add(\"language-\"+c);\n\n      prism.highlightElement(node);\n    }\n  }\n}\n\nfunction dedent(str){\n  var match = str.match(/^[ \\t]*(?=\\S)/gm);\n  if (!match) return str;\n\n  var indent = Math.min.apply(Math, match.map(function (el) {\n    return el.length;\n  }));\n\n  var re = new RegExp('^[ \\\\t]{' + indent + '}', 'gm');\n  return indent > 0 ? str.replace(re, '') : str;\n}\n"]}